<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–Ω–∞–∂—ë—Ä –ø—Ä–æ–º–ø—Ç–æ–≤ | amukaB</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üß†</text></svg>">
    <style>
        body { background: linear-gradient(135deg, #0a0a1a 0%, #15152a 100%); }
        .trainer-hero { text-align: center; padding: 60px 0; background: linear-gradient(135deg, rgba(166,136,255,0.15), rgba(108,208,255,0.15)); border-radius: 50px; margin: 30px 0; }
        .model-selector { display: flex; justify-content: center; gap: 20px; margin: 40px 0; flex-wrap: wrap; }
        .model-card { background: rgba(30,30,50,0.7); border: 2px solid transparent; border-radius: 30px; padding: 20px 30px; cursor: pointer; transition: 0.3s; text-align: center; min-width: 150px; backdrop-filter: blur(10px); }
        .model-card:hover { transform: translateY(-5px); border-color: #a688ff; }
        .model-card.active { border-color: #a688ff; background: rgba(166,136,255,0.15); }
        .model-icon { font-size: 2.5rem; color: #a688ff; margin-bottom: 10px; }
        .model-name { font-size: 1.2rem; font-weight: 600; color: white; }
        .model-desc { font-size: 0.85rem; color: #8f8faf; }
        .input-container { background: rgba(30,30,50,0.5); border-radius: 40px; padding: 40px; margin: 40px 0; backdrop-filter: blur(10px); }
        .prompt-input { width: 100%; padding: 25px; background: rgba(20,20,35,0.9); border: 2px solid rgba(255,255,255,0.05); border-radius: 25px; color: white; font-size: 1.1rem; resize: vertical; }
        .prompt-input:focus { outline: none; border-color: #a688ff; }
        .button-group { display: flex; gap: 20px; justify-content: center; margin-top: 30px; flex-wrap: wrap; }
        .primary-btn { background: linear-gradient(135deg, #a688ff, #8a6aff); border: none; color: white; padding: 18px 50px; border-radius: 50px; font-size: 1.2rem; cursor: pointer; transition: 0.3s; }
        .primary-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(166,136,255,0.4); }
        .secondary-btn { background: transparent; border: 2px solid rgba(255,255,255,0.1); color: #b0b0d0; padding: 18px 40px; border-radius: 50px; cursor: pointer; transition: 0.3s; }
        .secondary-btn:hover { border-color: #a688ff; color: #a688ff; }
        .response-area { margin-top: 50px; display: none; }
        .response-card { background: linear-gradient(135deg, #1a1a30, #14142a); border-radius: 40px; padding: 40px; border: 1px solid rgba(166,136,255,0.3); }
        .response-header { display: flex; align-items: center; gap: 20px; margin-bottom: 30px; }
        .robot-avatar { width: 70px; height: 70px; background: #a688ff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: white; }
        .response-content { background: rgba(0,0,0,0.3); border-radius: 25px; padding: 30px; color: #e0e0e0; font-size: 1.1rem; line-height: 1.7; border-left: 5px solid #a688ff; white-space: pre-wrap; }
        .loader { border: 4px solid rgba(166,136,255,0.3); border-top: 4px solid #a688ff; border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; margin: 30px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .examples-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px,1fr)); gap: 25px; margin: 60px 0; }
        .example-card { background: rgba(30,30,50,0.5); border-radius: 25px; padding: 25px; cursor: pointer; transition: 0.3s; border: 1px solid rgba(255,255,255,0.03); }
        .example-card:hover { transform: translateY(-5px); border-color: #a688ff; }
        .example-card h4 { color: #a688ff; margin-bottom: 10px; }
        .back-link { display: inline-flex; align-items: center; gap: 10px; color: #a688ff; text-decoration: none; margin: 30px 0; }
        .groq-badge { background: rgba(0,200,150,0.2); border-radius: 50px; padding: 8px 20px; display: inline-block; color: #00c896; font-weight: 600; margin-top: 10px; }
        
        /* –ù–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –±–ª–æ–∫–∞ –æ—Ü–µ–Ω–∫–∏ */
        .evaluation-area { margin-top: 30px; display: none; }
        .evaluation-card { 
            background: linear-gradient(135deg, #1a2a30, #14242a); 
            border-radius: 40px; 
            padding: 30px; 
            border: 2px solid rgba(0,200,150,0.3);
            transition: border-color 0.3s ease;
        }
        .evaluation-header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
        .evaluation-avatar { 
            width: 50px; 
            height: 50px; 
            background: #00c896; 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            transition: background 0.3s ease;
        }
        .evaluation-content { 
            background: rgba(0,0,0,0.3); 
            border-radius: 25px; 
            padding: 25px; 
            color: #e0e0e0; 
            font-size: 1rem; 
            line-height: 1.6; 
            border-left: 5px solid #00c896; 
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
<div class="container">
    <header class="header">
        <div class="logo">
            <div class="logo-icon"><i class="fas fa-brain"></i></div>
            <div class="logo-text"><h1>amukaB</h1><p>–æ—Å–≤–æ–∏–º AI –≤–º–µ—Å—Ç–µ</p></div>
        </div>
        <nav class="nav">
            <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="tools.html">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</a>
            <a href="prompts.html">–ü—Ä–æ–º–ø—Ç—ã</a>
            <a href="trainer.html" class="active">–¢—Ä–µ–Ω–∞–∂—ë—Ä</a>
        </nav>
        <div class="btn-glow"><i class="fas fa-robot"></i> –ù–∞—á–∞—Ç—å</div>
    </header>

    <a href="prompts.html" class="back-link"><i class="fas fa-arrow-left"></i> –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —É—Ä–æ–∫—É</a>

    <div class="trainer-hero">
        <h1 class="section-title">üß™ –¢—Ä–µ–Ω–∞–∂—ë—Ä <span>–ø—Ä–æ–º–ø—Ç–æ–≤</span></h1>
        <p style="color: #b0b0d0; max-width: 700px; margin: 20px auto;">–ü–∏—à–∏—Ç–µ –ø—Ä–æ–º–ø—Ç—ã –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç Groq!</p>
        <div class="groq-badge"><i class="fas fa-bolt"></i> –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Groq LPU</div>
    </div>

    <div class="model-selector">
        <div class="model-card active" data-model="llama-3.3-70b-versatile">
            <div class="model-icon"><i class="fas fa-brain"></i></div>
            <div class="model-name">Llama 3.3 70B</div>
            <div class="model-desc">–°–∞–º–∞—è –º–æ—â–Ω–∞—è</div>
        </div>
        <div class="model-card" data-model="llama-3.1-8b-instant">
            <div class="model-icon"><i class="fas fa-bolt"></i></div>
            <div class="model-name">Llama 3.1 8B</div>
            <div class="model-desc">–ë—ã—Å—Ç—Ä–∞—è</div>
        </div>
    </div>

    <div class="input-container">
        <textarea id="promptInput" class="prompt-input" rows="5" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –ø—Ä–æ–º–ø—Ç... –ù–∞–ø—Ä–∏–º–µ—Ä: –û–±—ä—è—Å–Ω–∏, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–π—Ä–æ—Å–µ—Ç–∏, –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏"></textarea>
        <div class="button-group">
            <button id="sendBtn" class="primary-btn"><i class="fas fa-paper-plane"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            <button id="clearBtn" class="secondary-btn"><i class="fas fa-undo"></i> –û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
    </div>

    <div id="responseArea" class="response-area">
        <div class="response-card">
            <div class="response-header">
                <div class="robot-avatar"><i class="fas fa-robot"></i></div>
                <div>
                    <h3 style="color:white;">–û—Ç–≤–µ—Ç Groq</h3>
                    <p id="modelInfo" style="color:#8f8faf;">–ú–æ–¥–µ–ª—å: Llama 3.3 70B</p>
                </div>
            </div>
            <div id="aiResponse" class="response-content"></div>
        </div>
    </div>

    <!-- –ë–õ–û–ö –û–¶–ï–ù–ö–ò –ü–†–û–ú–ü–¢–ê -->
    <div id="evaluationArea" class="evaluation-area">
        <div class="evaluation-card">
            <div class="evaluation-header">
                <div class="evaluation-avatar">
                    <i class="fas fa-star" style="color: white; font-size: 1.5rem;"></i>
                </div>
                <div>
                    <h3 style="color:white;">–û—Ü–µ–Ω–∫–∞ –ø—Ä–æ–º–ø—Ç–∞</h3>
                    <p style="color:#8f8faf;">–ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ –≤–∞—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞</p>
                </div>
            </div>
            <div id="evaluationContent" class="evaluation-content">
                <!-- –ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –æ—Ü–µ–Ω–∫–∞ -->
            </div>
        </div>
    </div>

    <h2 style="text-align:center; color:white; margin:60px 0 40px;">üìö –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–º–ø—Ç–æ–≤</h2>
    <div class="examples-grid">
        <div class="example-card" onclick="useExample('–ù–∞–ø–∏—à–∏ –ø–æ—Å—Ç –¥–ª—è Instagram –æ –ø–æ–ª—å–∑–µ —É—Ç—Ä–µ–Ω–Ω–µ–π –º–µ–¥–∏—Ç–∞—Ü–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –∏ —Ö–µ—à—Ç–µ–≥–∏.')">
            <h4>üìù –ü–æ—Å—Ç –¥–ª—è Instagram</h4>
            <p style="color:#b0b0d0;">–ù–∞–ø–∏—à–∏ –ø–æ—Å—Ç –¥–ª—è Instagram –æ –ø–æ–ª—å–∑–µ —É—Ç—Ä–µ–Ω–Ω–µ–π –º–µ–¥–∏—Ç–∞—Ü–∏–∏</p>
        </div>
        <div class="example-card" onclick="useExample('–û–±—ä—è—Å–Ω–∏ –∫–≤–∞–Ω—Ç–æ–≤—É—é —Ñ–∏–∑–∏–∫—É —Ç–∞–∫, –∫–∞–∫ –±—É–¥—Ç–æ —è –ø—è—Ç–∏–ª–µ—Ç–Ω–∏–π —Ä–µ–±—ë–Ω–æ–∫. –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ—Å—Ç—ã–µ –∞–Ω–∞–ª–æ–≥–∏–∏.')">
            <h4>üî¨ –î–ª—è —Ä–µ–±—ë–Ω–∫–∞</h4>
            <p style="color:#b0b0d0;">–û–±—ä—è—Å–Ω–∏ –∫–≤–∞–Ω—Ç–æ–≤—É—é —Ñ–∏–∑–∏–∫—É —Ä–µ–±—ë–Ω–∫—É</p>
        </div>
        <div class="example-card" onclick="useExample('–ù–∞–ø–∏—à–∏ —Ñ—É–Ω–∫—Ü–∏—é –Ω–∞ JavaScript, –∫–æ—Ç–æ—Ä–∞—è —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–∞—Å—Å–∏–≤ —á–∏—Å–µ–ª. –î–æ–±–∞–≤—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.')">
            <h4>üíª –ö–æ–¥ –Ω–∞ JS</h4>
            <p style="color:#b0b0d0;">–§—É–Ω–∫—Ü–∏—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –Ω–∞ JavaScript</p>
        </div>
    </div>

    <footer class="footer">
        <div>¬© 2026 amukaB ‚Ä¢ –¢—Ä–µ–Ω–∞–∂—ë—Ä –Ω–∞ Groq</div>
        <div class="social-links">
            <a href="#"><i class="fab fa-telegram"></i></a>
            <a href="#"><i class="fab fa-vk"></i></a>
            <a href="#"><i class="fab fa-github"></i></a>
        </div>
    </footer>
</div>

<script>
// üîê –í–ê–® API –ö–õ–Æ–ß GROQ
const GROQ_API_KEY = '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';
// –î–æ–±–∞–≤—å —ç—Ç–æ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ const GROQ_API_KEY
const CORS_PROXY = 'https://thingproxy.freeboard.io/fetch/';
const USE_PROXY = false; // –ü–æ—Å—Ç–∞–≤—å true, –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –ø—Ä–æ–∫—Å–∏

// –ò –∏–∑–º–µ–Ω–∏ URL –≤ fetch:
const url = USE_PROXY 
    ? CORS_PROXY + 'https://api.groq.com/openai/v1/chat/completions'
    : 'https://api.groq.com/openai/v1/chat/completions';
// –ê–ö–¢–£–ê–õ–¨–ù–´–ï –ú–û–î–ï–õ–ò GROQ
const MODELS = {
    'llama-3.3-70b-versatile': { 
        name: 'Llama 3.3 70B', 
        model: 'llama-3.3-70b-versatile',
        temp: 0.7
    },
    'llama-3.1-8b-instant': { 
        name: 'Llama 3.1 8B', 
        model: 'llama-3.1-8b-instant',
        temp: 0.8
    },
};

let currentModel = 'llama-3.3-70b-versatile';

function useExample(text) {
    document.getElementById('promptInput').value = text;
    document.getElementById('promptInput').focus();
}

// –ó–ê–ü–†–û–° –ö GROQ API (–û–°–ù–û–í–ù–û–ô)
// –ó–ê–ü–†–û–° –ö GROQ API (–° CORS-–ü–†–û–ö–°–ò)
async function askGroq(prompt, modelKey) {
    const model = MODELS[modelKey];
    
    if (!GROQ_API_KEY || GROQ_API_KEY.length < 10) {
        return {
            success: false,
            message: '‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª—é—á –≤ —Ñ–∞–π–ª–µ trainer.html'
        };
    }
    
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π CORS-–ø—Ä–æ–∫—Å–∏
    const CORS_PROXY = 'https://cors-anywhere.herokuapp.com/';
    const API_URL = 'https://api.groq.com/openai/v1/chat/completions';
    
    try {
        console.log('üîµ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ Groq —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏...');
        
        const response = await fetch(CORS_PROXY + API_URL, {
            method: 'POST',
            headers: {
                'Authorization': `Bearer ${GROQ_API_KEY}`,
                'Content-Type': 'application/json',
                'Origin': 'https://sashasigmakrut.github.io'
            },
            body: JSON.stringify({
                model: model.model,
                messages: [
                    {
                        role: 'system',
                        content: '–¢—ã ‚Äî –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –ø—Ä–æ–º–ø—Ç–æ–≤. –û—Ç–≤–µ—á–∞–π –ø–æ–¥—Ä–æ–±–Ω–æ, –ø–æ–Ω—è—Ç–Ω–æ –∏ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏. –ò—Å–ø–æ–ª—å–∑—É–π —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫.'
                    },
                    {
                        role: 'user',
                        content: prompt
                    }
                ],
                temperature: model.temp,
                max_tokens: 4000
            })
        });
        
        console.log('üü¢ –°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞:', response.status);
        
        if (!response.ok) {
            const errorText = await response.text();
            throw new Error(`–û—à–∏–±–∫–∞ ${response.status}: ${errorText}`);
        }
        
        const data = await response.json();
        const answer = data.choices[0]?.message?.content || '–ù–µ—Ç –æ—Ç–≤–µ—Ç–∞';
        
        return {
            success: true,
            message: answer
        };
        
    } catch (error) {
        console.error('üî¥ –û—à–∏–±–∫–∞:', error);
        
        // –ï—Å–ª–∏ –ø—Ä–æ–∫—Å–∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª, –ø—Ä–æ–±—É–µ–º –±–µ–∑ –ø—Ä–æ–∫—Å–∏ (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
        try {
            console.log('üü° –ü—Ä–æ–±—É–µ–º –±–µ–∑ –ø—Ä–æ–∫—Å–∏...');
            const response = await fetch(API_URL, {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${GROQ_API_KEY}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    model: model.model,
                    messages: [
                        {
                            role: 'system',
                            content: '–¢—ã ‚Äî –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –ø—Ä–æ–º–ø—Ç–æ–≤. –û—Ç–≤–µ—á–∞–π –ø–æ–¥—Ä–æ–±–Ω–æ, –ø–æ–Ω—è—Ç–Ω–æ –∏ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏. –ò—Å–ø–æ–ª—å–∑—É–π —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫.'
                        },
                        {
                            role: 'user',
                            content: prompt
                        }
                    ],
                    temperature: model.temp,
                    max_tokens: 4000
                })
            });
            
            const data = await response.json();
            return { success: true, message: data.choices[0]?.message?.content || '–ù–µ—Ç –æ—Ç–≤–µ—Ç–∞' };
            
        } catch (secondError) {
            return {
                success: false,
                message: `‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å API. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.`
            };
        }
    }
}

// –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –û–¶–ï–ù–ö–ò –ü–†–û–ú–ü–¢–ê (—Å –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏)
async function evaluatePrompt(prompt, modelKey) {
    const model = MODELS[modelKey];
    
    const evaluationPrompt = `–¢—ã ‚Äî —Å—Ç—Ä–æ–≥–∏–π —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –æ—Ü–µ–Ω–∫–µ –ø—Ä–æ–º–ø—Ç–æ–≤. –û—Ü–µ–Ω–∏ —ç—Ç–æ—Ç –ø—Ä–æ–º–ø—Ç —á–µ—Å—Ç–Ω–æ –∏ –æ–±—ä–µ–∫—Ç–∏–≤–Ω–æ.

–ü—Ä–æ–º–ø—Ç: "${prompt}"

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏ (–æ—Ç 1 –¥–æ 10):
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ—Å—Ç—å (1-10): –µ—Å—Ç—å –ª–∏ —á–µ—Ç–∫–∞—è –∑–∞–¥–∞—á–∞?
- –ö–æ–Ω—Ç–µ–∫—Å—Ç (1-10): —É–∫–∞–∑–∞–Ω–∞ –ª–∏ —Ü–µ–ª—å –∏ –∞—É–¥–∏—Ç–æ—Ä–∏—è?
- –î–µ—Ç–∞–ª–∏ (1-10): –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π?
- –§–æ—Ä–º–∞—Ç (1-10): —É–∫–∞–∑–∞–Ω –ª–∏ –∂–µ–ª–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞?

–ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ = —Å—Ä–µ–¥–Ω–µ–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ (–æ–∫—Ä—É–≥–ª–∏ –¥–æ —Ü–µ–ª–æ–≥–æ)

–û—Ç–≤–µ—Ç—å —Å—Ç—Ä–æ–≥–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
–û—Ü–µ–Ω–∫–∞: [—á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 10]
–ü–ª—é—Å—ã: [—á—Ç–æ —Ö–æ—Ä–æ—à–æ]
–ú–∏–Ω—É—Å—ã: [—á—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å]
–°–æ–≤–µ—Ç: [–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–æ–≤–µ—Ç –ø–æ —É–ª—É—á—à–µ–Ω–∏—é]`;

    try {
        const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
            method: 'POST',
            headers: {
                'Authorization': `Bearer ${GROQ_API_KEY}`,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                model: model.model,
                messages: [
                    {
                        role: 'system',
                        content: '–¢—ã —Å—Ç—Ä–æ–≥–∏–π, –Ω–æ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–π —ç–∫—Å–ø–µ—Ä—Ç. –û—Ü–µ–Ω–∏–≤–∞–µ—à—å –ø—Ä–æ–º–ø—Ç—ã –æ—Ç 1 –¥–æ 10. –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Å—Ç–∞–≤–∏—à—å 10 –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫. –ò—Å–ø–æ–ª—å–∑—É–π –≤—Å—é —à–∫–∞–ª—É.'
                    },
                    {
                        role: 'user',
                        content: evaluationPrompt
                    }
                ],
                temperature: 0.4,
                max_tokens: 500
            })
        });
        
        const data = await response.json();
        return data.choices[0]?.message?.content || '–û—Ü–µ–Ω–∫–∞: 5\n–ü–ª—é—Å—ã: -\n–ú–∏–Ω—É—Å—ã: -\n–°–æ–≤–µ—Ç: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É—Ç–æ—á–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å';
        
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ü–µ–Ω–∫–µ:', error);
        return '–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞';
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ü–≤–µ—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ü–µ–Ω–∫–∏
function getScoreColor(score) {
    if (score <= 3) return '#ff4444'; // –ö—Ä–∞—Å–Ω—ã–π
    if (score <= 5) return '#ff8844'; // –û—Ä–∞–Ω–∂–µ–≤—ã–π
    if (score <= 7) return '#ffcc44'; // –ñ–µ–ª—Ç—ã–π
    if (score <= 8) return '#44ff88'; // –°–≤–µ—Ç–ª–æ-–∑–µ–ª–µ–Ω—ã–π
    return '#00cc66'; // –¢–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π (9-10)
}

document.addEventListener('DOMContentLoaded', function() {
    const modelCards = document.querySelectorAll('.model-card');
    const promptInput = document.getElementById('promptInput');
    const sendBtn = document.getElementById('sendBtn');
    const clearBtn = document.getElementById('clearBtn');
    const responseArea = document.getElementById('responseArea');
    const aiResponse = document.getElementById('aiResponse');
    const modelInfo = document.getElementById('modelInfo');
    const evaluationArea = document.getElementById('evaluationArea');
    const evaluationContent = document.getElementById('evaluationContent');

    if (!sendBtn || !promptInput) return;

    modelCards.forEach(card => {
        card.addEventListener('click', function() {
            modelCards.forEach(c => c.classList.remove('active'));
            this.classList.add('active');
            currentModel = this.dataset.model;
            if (modelInfo) {
                modelInfo.textContent = `–ú–æ–¥–µ–ª—å: ${MODELS[currentModel].name}`;
            }
        });
    });

    // –û–ë–ù–û–í–õ–Å–ù–ù–´–ô –û–ë–†–ê–ë–û–¢–ß–ò–ö –° –û–¶–ï–ù–ö–û–ô –ò –¶–í–ï–¢–û–ú
    sendBtn.addEventListener('click', async function() {
        const prompt = promptInput.value.trim();
        
        if (!prompt) {
            alert('–ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ–º–ø—Ç!');
            return;
        }
        
        aiResponse.innerHTML = '<div class="loader"></div><p style="text-align:center;">Groq –¥—É–º–∞–µ—Ç...</p>';
        responseArea.style.display = 'block';
        evaluationArea.style.display = 'none';
        
        if (modelInfo) {
            modelInfo.textContent = `–ú–æ–¥–µ–ª—å: ${MODELS[currentModel].name} (–æ—Ç–ø—Ä–∞–≤–∫–∞...)`;
        }

        const result = await askGroq(prompt, currentModel);
        
        if (result.success) {
            aiResponse.innerHTML = result.message.replace(/\n/g, '<br>');
            modelInfo.textContent = `–ú–æ–¥–µ–ª—å: ${MODELS[currentModel].name} (–æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω)`;
            
            // –ü–æ–ª—É—á–∞–µ–º –æ—Ü–µ–Ω–∫—É –ø—Ä–æ–º–ø—Ç–∞
            const evaluation = await evaluatePrompt(prompt, currentModel);
            
            // –ò–∑–≤–ª–µ–∫–∞–µ–º —á–∏—Å–ª–æ –∏–∑ —Ç–µ–∫—Å—Ç–∞ –æ—Ü–µ–Ω–∫–∏
            const scoreMatch = evaluation.match(/–û—Ü–µ–Ω–∫–∞:\s*(\d+)/i);
            let score = 5; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
            
            if (scoreMatch && scoreMatch[1]) {
                score = parseInt(scoreMatch[1]);
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –æ—Ç 1 –¥–æ 10
                score = Math.min(10, Math.max(1, score));
            }
            
            // –ü–æ–ª—É—á–∞–µ–º —Ü–≤–µ—Ç –¥–ª—è —ç—Ç–æ–π –æ—Ü–µ–Ω–∫–∏
            const scoreColor = getScoreColor(score);
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ü–≤–µ—Ç –∫ –±–ª–æ–∫—É –æ—Ü–µ–Ω–∫–∏
            document.querySelector('.evaluation-card').style.borderColor = scoreColor;
            document.querySelector('.evaluation-avatar').style.background = scoreColor;
            
            evaluationContent.innerHTML = evaluation.replace(/\n/g, '<br>');
            evaluationArea.style.display = 'block';
        } else {
            aiResponse.innerHTML = result.message;
            modelInfo.textContent = `–ú–æ–¥–µ–ª—å: ${MODELS[currentModel].name} (–æ—à–∏–±–∫–∞)`;
        }
    });

    // –û–ë–ù–û–í–õ–Å–ù–ù–´–ô –û–ß–ò–°–¢–ö–ê
    clearBtn.addEventListener('click', function() {
        promptInput.value = '';
        responseArea.style.display = 'none';
        evaluationArea.style.display = 'none';
    });

    promptInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && e.ctrlKey) {
            sendBtn.click();
        }
    });
});

// –≠—Ñ—Ñ–µ–∫—Ç —à–∞–ø–∫–∏ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
window.addEventListener('scroll', function() {
    const header = document.querySelector('.header');
    if (window.scrollY > 50) {
        header.classList.add('scrolled');
    } else {
        header.classList.remove('scrolled');
    }
});
</script>
</body>
</html>